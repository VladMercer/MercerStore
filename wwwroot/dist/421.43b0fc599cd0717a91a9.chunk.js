"use strict";(self.webpackChunkmercerstore=self.webpackChunkmercerstore||[]).push([[421],{1421:(e,r,n)=>{n.r(r),n.d(r,{default:()=>u});var t=n(6540),a=n.n(t),i=n(1468),l=n(8521),s=n(5541),c=n(4848);function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i,l,s=[],c=!0,o=!1;try{if(i=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=i.call(n)).done)&&(s.push(t.value),s.length!==r);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(o)throw a}}return s}}(e,r)||function(e,r){if(e){if("string"==typeof e)return d(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}const u=function(){var e=(0,i.wA)(),r=(0,l.v)(),n=r.productId,d=r.review,u=o((0,t.useState)(!1),2),m=u[0],f=u[1],v=o((0,t.useState)(""),2),h=v[0],b=v[1],x=o((0,t.useState)(1),2),j=x[0],w=x[1],p=(0,t.useRef)(null),g=(0,t.useRef)(null),y=function(){g.current&&g.current.hide(),f(!1)};(0,t.useEffect)((function(){if(m&&p.current)return g.current=new window.bootstrap.Modal(p.current),g.current.show(),p.current.addEventListener("hidden.bs.modal",y),function(){p.current.removeEventListener("hidden.bs.modal",y),g.current=null}}),[m]);var N=!d;return(0,c.jsxs)(c.Fragment,{children:[N&&(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){return f(!0)},children:"Оставить отзыв"})}),!N&&(0,c.jsx)("p",{children:"Спасибо за отзыв!"}),(0,c.jsx)("div",{className:"modal fade",ref:p,tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",children:(0,c.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",id:"modalLabel",children:"Добавить отзыв"}),(0,c.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:y})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("form",{onSubmit:function(r){r.preventDefault();var t={productId:n,reviewText:h,value:j};e((0,s.kD)(t)),y()},children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{htmlFor:"reviewText",className:"form-label",children:(0,c.jsx)("h4",{children:"Опишите впечатления"})}),(0,c.jsx)("textarea",{id:"reviewText",className:"form-control",value:h,onChange:function(e){return b(e.target.value)},rows:"3",placeholder:"Место для отзыва"})]}),(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsx)("div",{className:"add-review",children:(0,c.jsxs)("fieldset",{className:"rating",children:[(0,c.jsx)("legend",{className:"rating__caption",children:(0,c.jsx)("h4",{children:"Оцените продукт"})}),(0,c.jsx)("div",{className:"rating__group",children:[5,4,3,2,1].map((function(e){return(0,c.jsxs)(a().Fragment,{children:[(0,c.jsx)("input",{type:"radio",id:"add-rate".concat(e),value:e,checked:j===e,onChange:function(){return w(e)},className:"rating__star-input"}),(0,c.jsx)("label",{htmlFor:"add-rate".concat(e),className:"rating__star",children:(0,c.jsx)("i",{className:"fa-solid fa-star"})})]},e)}))})]})})}),(0,c.jsx)("div",{className:"modal-footer justify-content-start",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-outline-warning",children:"Отправить отзыв"})})]})})]})})})]})}},8521:(e,r,n)=>{n.d(r,{v:()=>a});var t=n(1468),a=function(){var e=(0,t.d4)((function(e){return e.reviews.productId})),r=(0,t.d4)((function(e){return e.reviews.countReviews})),n=(0,t.d4)((function(e){return e.reviews.productReviews})),a=(0,t.d4)((function(e){return e.reviews.avgReviewRate})),i=(0,t.d4)((function(e){return e.reviews.currentUserId})),l=(0,t.d4)((function(e){return e.reviews.review}));return{productId:e,countReviews:r,productReviews:n,avgReviewRate:a,currentUserId:i,isLoaded:(0,t.d4)((function(e){return e.reviews.isLoaded})),review:l}}}}]);