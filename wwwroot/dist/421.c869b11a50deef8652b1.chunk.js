"use strict";(self.webpackChunkmercerstore=self.webpackChunkmercerstore||[]).push([[421],{1421:(e,r,n)=>{n.r(r),n.d(r,{default:()=>m});var t=n(6540),a=n.n(t),s=n(1468),i=n(8521),l=n(5541),c=n(1785),o=n(4848);function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,s,i,l=[],c=!0,o=!1;try{if(s=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=s.call(n)).done)&&(l.push(t.value),l.length!==r);c=!0);}catch(e){o=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return l}}(e,r)||function(e,r){if(e){if("string"==typeof e)return u(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}const m=function(){var e=(0,s.wA)(),r=(0,i.v)(),n=r.productId,u=r.review,m=(r.userRoles,d((0,t.useState)(!1),2)),f=m[0],v=m[1],h=d((0,t.useState)(""),2),b=h[0],w=h[1],x=d((0,t.useState)(1),2),j=x[0],p=x[1],g=(0,t.useRef)(null),y=(0,t.useRef)(null),N=function(){y.current&&y.current.hide(),v(!1)};(0,t.useEffect)((function(){if(f&&g.current)return y.current=new window.bootstrap.Modal(g.current),y.current.show(),g.current.addEventListener("hidden.bs.modal",N),function(){g.current.removeEventListener("hidden.bs.modal",N),y.current=null}}),[f]);var R=!u;return(0,o.jsxs)(o.Fragment,{children:[R&&(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("button",{className:"btn btn-outline-warning",onClick:function(){"guest"!==userRole?v(!0):(0,c.V)("Для оставления отзыва необходимо авторизоваться.")},children:"Оставить отзыв"})}),!R&&(0,o.jsx)("p",{children:"Спасибо за отзыв!"}),(0,o.jsx)("div",{className:"modal fade",ref:g,tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",children:(0,o.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",role:"document",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h5",{className:"modal-title",id:"modalLabel",children:"Добавить отзыв"}),(0,o.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:N})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsxs)("form",{onSubmit:function(r){r.preventDefault();var t={productId:n,reviewText:b,value:j};e((0,l.kD)(t)),N()},children:[(0,o.jsxs)("div",{className:"mb-3",children:[(0,o.jsx)("label",{htmlFor:"reviewText",className:"form-label",children:(0,o.jsx)("h4",{children:"Опишите впечатления"})}),(0,o.jsx)("textarea",{id:"reviewText",className:"form-control",value:b,onChange:function(e){return w(e.target.value)},rows:"3",placeholder:"Место для отзыва"})]}),(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)("div",{className:"add-review",children:(0,o.jsxs)("fieldset",{className:"rating",children:[(0,o.jsx)("legend",{className:"rating__caption",children:(0,o.jsx)("h4",{children:"Оцените продукт"})}),(0,o.jsx)("div",{className:"rating__group",children:[5,4,3,2,1].map((function(e){return(0,o.jsxs)(a().Fragment,{children:[(0,o.jsx)("input",{type:"radio",id:"add-rate".concat(e),value:e,checked:j===e,onChange:function(){return p(e)},className:"rating__star-input"}),(0,o.jsx)("label",{htmlFor:"add-rate".concat(e),className:"rating__star",children:(0,o.jsx)("i",{className:"fa-solid fa-star"})})]},e)}))})]})})}),(0,o.jsx)("div",{className:"modal-footer justify-content-start",children:(0,o.jsx)("button",{type:"submit",className:"btn btn-outline-warning",children:"Отправить отзыв"})})]})})]})})})]})}},8521:(e,r,n)=>{n.d(r,{v:()=>a});var t=n(1468),a=function(){var e=(0,t.d4)((function(e){return e.reviews.productId})),r=(0,t.d4)((function(e){return e.reviews.countReviews})),n=(0,t.d4)((function(e){return e.reviews.productReviews})),a=(0,t.d4)((function(e){return e.reviews.avgReviewRate})),s=(0,t.d4)((function(e){return e.reviews.currentUserId})),i=(0,t.d4)((function(e){return e.reviews.userRoles})),l=(0,t.d4)((function(e){return e.reviews.review}));return{productId:e,countReviews:r,productReviews:n,avgReviewRate:a,currentUserId:s,userRoles:i,isLoaded:(0,t.d4)((function(e){return e.reviews.isLoaded})),review:l}}}}]);