"use strict";(self.webpackChunkmercerstore=self.webpackChunkmercerstore||[]).push([[9617],{9617:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var n=a(6540),c=a(2384),s=a(1468),r=a(459);var d=a(4848);const i=function(){var e,t,a,i,l=(e=(0,s.wA)(),t=(0,s.d4)((function(e){return e.cart})),a=t.items,i=t.isLoaded,(0,n.useEffect)((function(){i||(e((0,r.HU)()),e((0,r.Tt)()))}),[i,e]),(0,n.useEffect)((function(){var t=setInterval((function(){e((0,r.R2)())}),6e4);return function(){return clearInterval(t)}}),[e]),a),o=(0,c._)(),u=o.totalPrice,f=o.removeFromCart;return(0,n.useEffect)((function(){var e=document.getElementById("offcanvasCart");if(e){var t,a=new bootstrap.Offcanvas(e);null===(t=document.getElementById("cart-open"))||void 0===t||t.addEventListener("click",(function(e){e.preventDefault(),a.toggle()}))}}),[]),(0,d.jsxs)("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasCart","aria-labelledby":"offcanvasCartLabel",children:[(0,d.jsxs)("div",{className:"offcanvas-header",children:[(0,d.jsx)("h5",{className:"offcanvas-title",id:"offcanvasCartLabel",children:"Корзина"}),(0,d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,d.jsx)("div",{className:"offcanvas-body",children:l.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table offcanvasCart-table",children:[(0,d.jsx)("tbody",{children:l.map((function(e){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"product-img-td",children:(0,d.jsx)("a",{href:"/product/details/".concat(e.productId),children:(0,d.jsx)("img",{src:e.imageUrl,alt:e.name,className:"img-fluid product-image"})})}),(0,d.jsx)("td",{className:"product-cart-name-td",children:(0,d.jsx)("a",{href:"/product/details/".concat(e.productId),className:"product-name-link",children:e.name})}),(0,d.jsx)("td",{className:"product-price-td",children:e.discountedPrice?(0,d.jsxs)("div",{className:"price-container",children:[(0,d.jsxs)("small",{className:"old-price-card",children:[e.price.toLocaleString(),"₽"]}),(0,d.jsxs)("div",{className:"",children:[e.discountedPrice.toLocaleString(),"₽"]})]}):(0,d.jsxs)("div",{className:"",children:[e.price.toLocaleString(),"₽"]})}),(0,d.jsxs)("td",{className:"product-quantity-td",children:["×",e.quantity]}),(0,d.jsx)("td",{className:"remove-btn-td",children:(0,d.jsx)("button",{onClick:function(){return f(e.productId)},className:"remove-from-cart-button",children:(0,d.jsx)("i",{className:"fa-solid fa-trash-can"})})})]},e.productId)}))}),(0,d.jsx)("tfoot",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:"3",className:"text-end-td",children:"Итого:"}),(0,d.jsxs)("td",{colSpan:"2",className:"total-price-td",children:[u," ₽"]})]})})]})}),(0,d.jsxs)("div",{className:"text-end mt-3 d-flex justify-content-between fixed-bottom-buttons",children:[(0,d.jsx)("a",{href:"/cart",className:"btn btn-outline-warning",id:"button-offcanvas-cart",children:"Перейти в корзину"}),(0,d.jsx)("a",{href:"/order",className:"btn btn-outline-warning",id:"button-offcanvas-checkout",children:"Оформить заказ"})]})]}):(0,d.jsx)("p",{children:"Ваша корзина пуста"})})]})}},2384:(e,t,a)=>{a.d(t,{_:()=>s});var n=a(1468),c=a(459),s=function(){var e=(0,n.wA)(),t=(0,n.d4)((function(e){return e.cart}));return{items:t.items,totalPrice:t.totalPrice,itemCount:t.itemCount,addToCart:function(t){return e((0,c.bE)(t))},removeFromCart:function(t){return e((0,c.dt)(t))}}}}}]);
//# sourceMappingURL=9617.bdb96e94805ea37ae873.chunk.js.map